{% extends 'todos/base.html' %}  
  
{% block content %}  
<h1>My Todo List</h1>  
  
<!-- Statistics Dashboard -->  
<div style="display: flex; justify-content: space-around; margin: 20px 0; padding: 20px; background-color: #f8f9fa; border-radius: 10px;">  
    <div style="text-align: center;">  
        <h3 style="color: #007bff; margin: 0;">{{ total_todos }}</h3>  
        <p style="color: #666; margin: 5px 0;">Total</p>  
    </div>  
    <div style="text-align: center;">  
        <h3 style="color: #28a745; margin: 0;">{{ completed_todos }}</h3>  
        <p style="color: #666; margin: 5px 0;">Completed</p>  
    </div>  
    <div style="text-align: center;">  
        <h3 style="color: #ffc107; margin: 0;">{{ pending_todos }}</h3>  
        <p style="color: #666; margin: 5px 0;">Pending</p>  
    </div>  
</div>  
  
<!-- Search and Filter Form -->  
<form method="GET" style="margin: 20px 0; padding: 20px; background-color: #f8f9fa; border-radius: 10px;">  
    <div style="display: flex; gap: 10px; align-items: flex-end;">  
        <div style="flex: 1;">  
            <label for="search">Search Todos:</label>  
            <input type="text" id="search" name="search" value="{{ search_query }}"   
                   placeholder="Search by title or description..."   
                   style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">  
        </div>  
          
        <div>  
            <label for="status">Filter by Status:</label>  
            <select id="status" name="status" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">  
                <option value="all" {% if status_filter == 'all' %}selected{% endif %}>All Todos</option>  
                <option value="pending" {% if status_filter == 'pending' %}selected{% endif %}>Pending</option>  
                <option value="completed" {% if status_filter == 'completed' %}selected{% endif %}>Completed</option>  
            </select>  
        </div>  
          
        <button type="submit" class="btn">Apply</button>  
        <a href="{% url 'todo_list' %}" class="btn btn-danger">Clear</a>  
    </div>  
</form>  
  
<a href="{% url 'todo_create' %}" class="btn" style="margin-bottom: 20px;">Add New Todo</a>  
  
<!-- Display Search Results Info -->  
{% if search_query %}  
<p style="color: #666; margin: 10px 0;">  
    Showing results for "<strong>{{ search_query }}</strong>" - Found {{ todos|length }} todo(s)  
</p>  
{% endif %}  
  
<!-- Todos List -->  
<div style="margin-top: 30px;">  
    {% if todos %}  
        {% for todo in todos %}  
        <div style="border: 1px solid #ddd; padding: 15px; margin-bottom: 15px; border-radius: 5px; {% if todo.completed %}background-color: #d4edda;{% endif %}">  
            <h3 style="color: {% if todo.completed %}#155724{% else %}#333{% endif %}; margin-bottom: 10px;">  
                {{ todo.title }}  
                {% if todo.completed %}  
                    <span style="color: green; font-size: 14px;">âœ“ Completed</span>  
                {% endif %}  
            </h3>  
              
            {% if todo.description %}  
            <p style="color: #666; margin-bottom: 10px;">{{ todo.description }}</p>  
            {% endif %}  
              
            <small style="color: #999;">Created: {{ todo.created_at|date:"d M Y, h:i A" }}</small>  
              
            <div style="margin-top: 15px;">  
                <a href="{% url 'todo_toggle' todo.pk %}" class="btn btn-success" style="font-size: 14px;">  
                    {% if todo.completed %}Mark Incomplete{% else %}Mark Complete{% endif %}  
                </a>  
                <a href="{% url 'todo_update' todo.pk %}" class="btn" style="font-size: 14px;">Edit</a>  
                <a href="{% url 'todo_delete' todo.pk %}" class="btn btn-danger" style="font-size: 14px;">Delete</a>  
            </div>  
        </div>  
        {% endfor %}  
    {% else %}  
        {% if search_query %}  
            <p style="text-align: center; color: #999; margin-top: 50px;">  
                No todos found matching "{{ search_query }}". Try a different search term.  
            </p>  
        {% else %}  
            <p style="text-align: center; color: #999; margin-top: 50px;">  
                No todos yet. Create your first todo!  
            </p>  
        {% endif %}  
    {% endif %}  
</div>  
{% endblock %} 